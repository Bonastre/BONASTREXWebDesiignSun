{% liquid
  comment
    To be able to have a metafield that is storefront accessible in a custom namespace one needs to use `$app:namespace` and this is the way to access it from liquid, see https://shopify.dev/docs/apps/build/custom-data/reserved-prefixes#create-a-metafield-definition-under-a-reserved-namespace
  endcomment
  assign product_duplicate_namespace = "app--93504864257--product-duplicate"
  assign product_duplicate_key = "product_duplicate"
  assign product_duplicate = collection.metafields[product_duplicate_namespace][product_duplicate_key].value

  assign namespace = "app--93504864257--column-settings"
  assign key = "column_settings"
  assign column_settings = shop.metafields[namespace][key].value
  if column_settings[0]
    assign columns_desktop = column_settings[0]
  else
    assign columns_desktop = 4
  endif

  if column_settings[1]
    assign columns_mobile = column_settings[1]
  else
    assign columns_mobile = 2
  endif

  assign ids = ""
  for block in content_blocks
    assign ids = ids | append: block.system.id
    if forloop.last == false
      assign ids = ids | append: ","
    endif
  endfor
  comment
    set the defaults that would happen if someone just looped over collection.products with a for loop without pagination
  endcomment
  assign page_size = "50"
  if paginate.page_size
    assign page_size = paginate.page_size
  endif
  assign pagination_pages = "1"
  if paginate.pages
    assign pagination_pages = paginate.pages
  endif
  assign first_page_product_ids = "null"
  assign current_page = "0"
  if paginate.current_page
    comment
      make current_page 0-indexed because that makes it much easier in the typescript side
    endcomment
    assign current_page = paginate.current_page | minus: 1
    if current_page == 0
      assign first_page_product_ids = "["
      for product in collection.products
        assign first_page_product_ids = first_page_product_ids | append: '"gid://shopify/Product/' | append: product.id | append: '"'
        if forloop.last == false
          assign first_page_product_ids = first_page_product_ids | append: ","
        endif
      endfor
      assign first_page_product_ids = first_page_product_ids | append: "]"
    endif
  endif

  assign storefront_key_namespace = "app--93504864257--storefront-access-key"
  assign storefront_key_key = "storefront_access_key"
  assign storefront_access_key = shop.metafields[storefront_key_namespace][storefront_key_key].value

  assign block_assets = ""
  for content in content_blocks
    if content.video and content.video != empty
      assign preview_src = content.video.value.preview_image | image_url
      assign block_assets = block_assets | append: preview_src | append: "‚µ∞"
      for source in content.video.value.sources
        assign block_assets = block_assets | append: source.format | append: "„Ä∑" | append: source.mime_type | append: "„Ä∑" | append: source.url | append: "„Ä∑" | append: source.width
        if forloop.last == false
          assign block_assets = block_assets | append: "ëà∫"
        endif
      endfor
    elsif content.image and content.image != empty
      assign cdn_img_url = content.image.value.src | image_url
      assign cdn_hover_url = content.hover_image.value.src | image_url
      assign block_assets = block_assets | append: cdn_img_url | append: "Íåù" | append: cdn_hover_url
    endif
    if forloop.last == false
      assign block_assets = block_assets | append: "·ç®"
    endif
  endfor

  assign block_links = ""
  for content in content_blocks
    assign href = ""
    if content.link_to_collection
      assign href = collections[content.link_to_collection].url | append: "?content-block=" | append: content.system.id
    elsif content.link_to_page
      assign href = pages[content.link_to_page].url | append: "?content-block=" | append: content.system.id
    elsif content.link_to_product
      assign href = content.link_to_product.value.url | append: "?content-block=" | append: content.system.id
    endif
    assign block_links = block_links | append: href
    if forloop.last == false
      assign block_links = block_links | append: "·ç®"
    endif
  endfor
%}
{{ "depict-product-grid.css" | asset_url | stylesheet_tag }}
<script
  id="depict-grid-rendering-script"
  {% if grid_settings %}
    {% if grid_settings.alignBlocksToImage %}
      data-align-images="true"
    {% else %}
      data-align-images="false"
    {% endif %}
  {% else %}
    {% if section.settings.align_depict_blocks == "image" %}
      data-align-images="true"
    {% else %}
      data-align-images="false"
    {% endif %}
  {% endif %}
  data-columns-mobile="{{ columns_mobile }}"
  data-columns-desktop="{{ columns_desktop }}"
  data-content-blocks="{{ content_blocks | json |  escape }}"
  data-block-ids="{{ ids }}"
  data-block-assets="{{ block_assets | escape }}"
  data-block-links="{{ block_links | escape }}"
  data-duplicates="{{ product_duplicate | json | escape }}"
  data-collection-id="{{ collection.id }}"
  data-storefront-access-key="{{ storefront_access_key }}"
  data-first-page-product-ids="{{ first_page_product_ids | escape }}"
  data-default-sorting="{{ collection.default_sort_by }}"
  data-paginate='
    {
    "page_size": {{ page_size }},
    "pages": {{ pagination_pages }},
    "current_page": {{ current_page }}
    }
  '
>
  !function(){"use strict";const e=Symbol("solid-proxy"),t="function"==typeof Proxy,n=Symbol("solid-track"),o={equals:(e,t)=>e===t};let r=E;const c=1,s=2,i={owned:null,cleanups:null,context:null,owner:null};var l=null;let u=null,a=null,f=null,d=null,p=0;function g(e,t){const n=a,o=l,r=0===e.length,c=o,s=r?i:{owned:null,cleanups:null,context:c?c.context:null,owner:c},u=r?e:()=>e((()=>b((()=>j(s)))));l=s,a=null;try{return x(u,!0)}finally{a=n,l=o}}function _(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},o,t):o).equals||void 0};return[T.bind(n),e=>("function"==typeof e&&(e=e(n.value)),M(n,e))]}function h(e,t,n){I(A(e,t,!1,c))}function m(e,t,n){r=R;const o=A(e,t,!1,c);o.user=!0,d?d.push(o):I(o)}function y(e,t,n){n=n?Object.assign({},o,n):o;const r=A(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,I(r),T.bind(r)}function w(e){return x(e,!1)}function b(e){if(null===a)return e();const t=a;a=null;try{return e()}finally{a=t}}function v(e){return null===l||(null===l.cleanups?l.cleanups=[e]:l.cleanups.push(e)),e}function k(e,t){const n=Symbol("context");return{id:n,Provider:N(n),defaultValue:e}}function S(e){let t;return l&&l.context&&void 0!==(t=l.context[e.id])?t:e.defaultValue}function O(e){const t=y(e),n=y((()=>D(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function T(){if(this.sources&&this.state)if(this.state===c)I(this);else{const e=f;f=null,x((()=>C(this)),!1),f=e}if(a){const e=this.observers?this.observers.length:0;a.sources?(a.sources.push(this),a.sourceSlots.push(e)):(a.sources=[this],a.sourceSlots=[e]),this.observers?(this.observers.push(a),this.observerSlots.push(a.sources.length-1)):(this.observers=[a],this.observerSlots=[a.sources.length-1])}return this.value}function M(e,t,n){let o=e.value;return e.comparator&&e.comparator(o,t)||(e.value=t,e.observers&&e.observers.length&&x((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],o=u&&u.running;o&&u.disposed.has(n),(o?n.tState:n.state)||(n.pure?f.push(n):d.push(n),n.observers&&L(n)),o||(n.state=c)}if(f.length>1e6)throw f=[],Error()}),!1)),t}function I(e){if(!e.fn)return;j(e);const t=p;((e,t,n)=>{let o;const r=l,s=a;a=l=e;try{o=e.fn(t)}catch(i){return e.pure&&(e.state=c,e.owned&&e.owned.forEach(j),e.owned=null),e.updatedAt=n+1,B(i)}finally{a=s,l=r}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?M(e,o):e.value=o,e.updatedAt=n)})(e,e.value,t)}function A(e,t,n,o=c,r){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:l,context:l?l.context:null,pure:n};return null===l||l!==i&&(l.owned?l.owned.push(s):l.owned=[s]),s}function P(e){if(0===e.state)return;if(e.state===s)return C(e);if(e.suspense&&b(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<p);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===c)I(e);else if(e.state===s){const n=f;f=null,x((()=>C(e,t[0])),!1),f=n}}function x(e,t){if(f)return e();let n=!1;t||(f=[]),d?n=!0:d=[],p++;try{const t=e();return(e=>{if(f&&(E(f),f=null),e)return;const t=d;d=null,t.length&&x((()=>r(t)),!1)})(n),t}catch(o){n||(d=null),f=null,B(o)}}function E(e){for(let t=0;t<e.length;t++)P(e[t])}function R(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:P(o)}for(t=0;t<n;t++)P(e[t])}function C(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const e=o.state;e===c?o!==t&&(!o.updatedAt||o.updatedAt<p)&&P(o):e===s&&C(o,t)}}}function L(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=s,n.pure?f.push(n):d.push(n),n.observers&&L(n))}}function j(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){const e=o.pop(),r=t.observerSlots.pop();n<o.length&&(e.sourceSlots[r]=n,o[n]=e,t.observerSlots[n]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)j(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)j(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function B(e,t=l){const n=(e=>e instanceof Error?e:Error("string"==typeof e?e:"Unknown error",{cause:e}))(e);throw n}function D(e){if("function"==typeof e&&!e.length)return D(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const o=D(e[n]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return t}return e}function N(e,t){return t=>{let n;return h((()=>n=b((()=>(l.context={...l.context,[e]:t.value},O((()=>t.children)))))),void 0),n}}const $=Symbol("fallback");function q(e){for(let t=0;t<e.length;t++)e[t]()}function F(e,t,o={}){let r=[],c=[],s=[],i=0,l=t.length>1?[]:null;return v((()=>q(s))),()=>{let u,a,f=e()||[],d=f.length;return f[n],b((()=>{let e,t,n,_,h,m,y,w,b;if(0===d)0!==i&&(q(s),s=[],r=[],c=[],i=0,l&&(l=[])),o.fallback&&(r=[$],c[0]=g((e=>(s[0]=e,o.fallback()))),i=1);else if(0===i){for(c=Array(d),a=0;a<d;a++)r[a]=f[a],c[a]=g(p);i=d}else{for(n=Array(d),_=Array(d),l&&(h=Array(d)),m=0,y=Math.min(i,d);m<y&&r[m]===f[m];m++);for(y=i-1,w=d-1;y>=m&&w>=m&&r[y]===f[w];y--,w--)n[w]=c[y],_[w]=s[y],l&&(h[w]=l[y]);for(e=new Map,t=Array(w+1),a=w;a>=m;a--)b=f[a],u=e.get(b),t[a]=void 0===u?-1:u,e.set(b,a);for(u=m;u<=y;u++)b=r[u],a=e.get(b),void 0!==a&&-1!==a?(n[a]=c[u],_[a]=s[u],l&&(h[a]=l[u]),a=t[a],e.set(b,a)):s[u]();for(a=m;a<d;a++)a in n?(c[a]=n[a],s[a]=_[a],l&&(l[a]=h[a],l[a](a))):c[a]=g(p);c=c.slice(0,i=d),r=f.slice(0)}return c}));function p(e){if(s[a]=e,l){const[e,n]=_(a);return l[a]=n,t(f[a],e)}return t(f[a])}}}function K(e,t){return b((()=>e(t||{})))}function J(){return!0}const z={get:(t,n,o)=>n===e?o:t.get(n),has:(t,n)=>n===e||t.has(n),set:J,deleteProperty:J,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:J,deleteProperty:J}),ownKeys:e=>e.keys()};function H(e){const t="fallback"in e&&{fallback:()=>e.fallback};return y(((e,t,o={})=>{let r,c=[],s=[],i=[],l=[],u=0;return v((()=>q(i))),()=>{const a=e()||[],f=a.length;return a[n],b((()=>{if(0===f)return 0!==u&&(q(i),i=[],c=[],s=[],u=0,l=[]),o.fallback&&(c=[$],s[0]=g((e=>(i[0]=e,o.fallback()))),u=1),s;for(c[0]===$&&(i[0](),i=[],c=[],s=[],u=0),r=0;r<f;r++)r<c.length&&c[r]!==a[r]?l[r]((()=>a[r])):r>=c.length&&(s[r]=g(d));for(;r<c.length;r++)i[r]();return u=l.length=i.length=f,c=a.slice(0),s=s.slice(0,u)}));function d(e){i[r]=e;const[n,o]=_(a[r]);return l[r]=o,t(n,r)}}})((()=>e.each),e.children,t||void 0))}function U(e){const t=e.keyed,n=y((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return y((()=>{const o=n();if(o){const r=e.children;return"function"==typeof r&&r.length>0?b((()=>r(t?o:()=>{if(!b(n))throw"Stale read from <Show>.";return e.when}))):r}return e.fallback}),void 0,void 0)}const G=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),V=new Set(["innerHTML","textContent","innerText","children"]),W=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),X=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}}),Q=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Y=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Z={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},ee="_$DX_DELEGATE";function te(e,t,n){let o;const r=()=>{const t=document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:t.content.firstChild},c=t?()=>b((()=>document.importNode(o||(o=r()),!0))):()=>(o||(o=r())).cloneNode(!0);return c.cloneNode=c,c}function ne(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function oe(e,t){null==t?e.removeAttribute("class"):e.className=t}function re(e,t,n){return b((()=>e(t,n)))}function ce(e,t,n,o){if(void 0===n||o||(o=[]),"function"!=typeof t)return ue(e,t,o,n);h((o=>ue(e,t(),o,n)),o)}function se(e,t,n){const o=t.trim().split(/\s+/);for(let r=0,c=o.length;r<c;r++)e.classList.toggle(o[r],n)}function ie(e,t,n,o,r,c,s){let i,l,u,a,f;if("style"===t)return((e,t,n)=>{if(!t)return n?ne(e,"style"):t;const o=e.style;if("string"==typeof t)return o.cssText=t;let r,c;for(c in"string"==typeof n&&(o.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[c]&&o.removeProperty(c),delete n[c];for(c in t)r=t[c],r!==n[c]&&(o.setProperty(c,r),n[c]=r);return n})(e,n,o);if("classList"===t)return((e,t,n={})=>{const o=Object.keys(t||{}),r=Object.keys(n);let c,s;for(c=0,s=r.length;c<s;c++){const o=r[c];o&&"undefined"!==o&&!t[o]&&(se(e,o,!1),delete n[o])}for(c=0,s=o.length;c<s;c++){const r=o[c],s=!!t[r];r&&"undefined"!==r&&n[r]!==s&&s&&(se(e,r,!0),n[r]=s)}return n})(e,n,o);if(n===o)return o;if("ref"===t)c||n(e);else if("on:"===t.slice(0,3)){const r=t.slice(3);o&&e.removeEventListener(r,o,"function"!=typeof o&&o),n&&e.addEventListener(r,n,"function"!=typeof n&&n)}else if("oncapture:"===t.slice(0,10)){const r=t.slice(10);o&&e.removeEventListener(r,o,!0),n&&e.addEventListener(r,n,!0)}else if("on"===t.slice(0,2)){const r=t.slice(2).toLowerCase(),c=Q.has(r);if(!c&&o){const t=Array.isArray(o)?o[0]:o;e.removeEventListener(r,t)}(c||n)&&(((e,t,n,o)=>{if(o)Array.isArray(n)?(e["$$"+t]=n[0],e[`$$${t}Data`]=n[1]):e["$$"+t]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=t=>o.call(e,n[1],t))}else e.addEventListener(t,n,"function"!=typeof n&&n)})(e,r,n,c),c&&((e,t=window.document)=>{const n=t[ee]||(t[ee]=new Set);for(let o=0,r=e.length;o<r;o++){const r=e[o];n.has(r)||(n.add(r),t.addEventListener(r,le))}})([r]))}else if("attr:"===t.slice(0,5))ne(e,t.slice(5),n);else if("bool:"===t.slice(0,5))((e,t,n)=>{n?e.setAttribute(t,""):e.removeAttribute(t)})(e,t.slice(5),n);else if((f="prop:"===t.slice(0,5))||(u=V.has(t))||!r&&((a=((e,t)=>{const n=X[e];return"object"==typeof n?n[t]?n.$:void 0:n})(t,e.tagName))||(l=G.has(t)))||(i=e.nodeName.includes("-")||"is"in s))f&&(t=t.slice(5),l=!0),"class"===t||"className"===t?oe(e,n):!i||l||u?e[a||t]=n:e[(d=t,d.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase())))]=n;else{const o=r&&t.indexOf(":")>-1&&Z[t.split(":")[0]];o?((e,t,n,o)=>{null==o?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,o)})(e,o,t,n):ne(e,W[t]||t,n)}var d;return n}function le(e){let t=e.target;const n="$$"+e.type,o=e.target,r=e.currentTarget,c=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),s=()=>{const o=t[n];if(o&&!t.disabled){const r=t[n+"Data"];if(void 0!==r?o.call(t,r,e):o.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&c(t.host),!0},i=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const n=e.composedPath();c(n[0]);for(let e=0;e<n.length-2&&(t=n[e],s());e++){if(t._$host){t=t._$host,i();break}if(t.parentNode===r)break}}else i();c(o)}function ue(e,t,n,o,r){for(;"function"==typeof n;)n=n();if(t===n)return n;const c=typeof t,s=void 0!==o;if(e=s&&n[0]&&n[0].parentNode||e,"string"===c||"number"===c){if("number"===c&&(t=t.toString())===n)return n;if(s){let r=n[0];r&&3===r.nodeType?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=de(e,n,o,r)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===c)n=de(e,n,o);else{if("function"===c)return h((()=>{let r=t();for(;"function"==typeof r;)r=r();n=ue(e,r,n,o)})),()=>n;if(Array.isArray(t)){const c=[],i=n&&Array.isArray(n);if(ae(c,t,n,r))return h((()=>n=ue(e,c,n,o,!0))),()=>n;if(0===c.length){if(n=de(e,n,o),s)return n}else i?0===n.length?fe(e,c,o):((e,t,n)=>{let o=n.length,r=t.length,c=o,s=0,i=0,l=t[r-1].nextSibling,u=null;for(;s<r||i<c;)if(t[s]!==n[i]){for(;t[r-1]===n[c-1];)r--,c--;if(r===s){const t=c<o?i?n[i-1].nextSibling:n[c-i]:l;for(;i<c;)e.insertBefore(n[i++],t)}else if(c===i)for(;s<r;)u&&u.has(t[s])||t[s].remove(),s++;else if(t[s]===n[c-1]&&n[i]===t[r-1]){const o=t[--r].nextSibling;e.insertBefore(n[i++],t[s++].nextSibling),e.insertBefore(n[--c],o),t[r]=n[c]}else{if(!u){u=new Map;let e=i;for(;e<c;)u.set(n[e],e++)}const o=u.get(t[s]);if(null!=o)if(i<o&&o<c){let l,a=s,f=1;for(;++a<r&&a<c&&null!=(l=u.get(t[a]))&&l===o+f;)f++;if(f>o-i){const r=t[s];for(;i<o;)e.insertBefore(n[i++],r)}else e.replaceChild(n[i++],t[s++])}else s++;else t[s++].remove()}}else s++,i++})(e,n,c):(n&&de(e),fe(e,c));n=c}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=de(e,n,o,t);de(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function ae(e,t,n,o){let r=!1;for(let c=0,s=t.length;c<s;c++){let s,i=t[c],l=n&&n[e.length];if(null==i||!0===i||!1===i);else if("object"==(s=typeof i)&&i.nodeType)e.push(i);else if(Array.isArray(i))r=ae(e,i,l)||r;else if("function"===s)if(o){for(;"function"==typeof i;)i=i();r=ae(e,Array.isArray(i)?i:[i],Array.isArray(l)?l:[l])||r}else e.push(i),r=!0;else{const t=i+"";l&&3===l.nodeType&&l.data===t?e.push(l):e.push(document.createTextNode(t))}}return r}function fe(e,t,n=null){for(let o=0,r=t.length;o<r;o++)e.insertBefore(t[o],n)}function de(e,t,n,o){if(void 0===n)return e.textContent="";const r=o||document.createTextNode("");if(t.length){let o=!1;for(let c=t.length-1;c>=0;c--){const s=t[c];if(r!==s){const t=s.parentNode===e;o||c?t&&s.remove():t?e.replaceChild(r,s):e.insertBefore(r,n)}else o=!0}}else e.insertBefore(r,n);return[r]}function pe(n){const[o,r]=((n,...o)=>{if(t&&e in n){const e=new Set(o.length>1?o.flat():o[0]),t=o.map((e=>new Proxy({get:t=>e.includes(t)?n[t]:void 0,has:t=>e.includes(t)&&t in n,keys:()=>e.filter((e=>e in n))},z)));return t.push(new Proxy({get:t=>e.has(t)?void 0:n[t],has:t=>!e.has(t)&&t in n,keys:()=>Object.keys(n).filter((t=>!e.has(t)))},z)),t}const r={},c=o.map((()=>({})));for(const e of Object.getOwnPropertyNames(n)){const t=Object.getOwnPropertyDescriptor(n,e),s=!t.get&&!t.set&&t.enumerable&&t.writable&&t.configurable;let i=!1,l=0;for(const n of o)n.includes(e)&&(i=!0,s?c[l][e]=t.value:Object.defineProperty(c[l],e,t)),++l;i||(s?r[e]=t.value:Object.defineProperty(r,e,t))}return[...c,r]})(n,["component"]),c=y((()=>o.component));return y((()=>{const e=c();switch(typeof e){case"function":return b((()=>e(r)));case"string":const t=Y.has(e),n=((e,t=!1)=>t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e))(e,t);return((e,t={},n)=>{const o={};h((()=>o.children=ue(e,t.children,o.children))),h((()=>"function"==typeof t.ref&&re(t.ref,e))),h((()=>((e,t,n,o,r={},c=!1)=>{t||(t={});for(const s in r)if(!(s in t)){if("children"===s)continue;r[s]=ie(e,s,null,r[s],n,c,t)}for(const s in t){if("children"===s)continue;const o=t[s];r[s]=ie(e,s,o,r[s],n,c,t)}})(e,t,n,0,o,!0)))})(n,r,t),n}}))}function ge(e){const t=[];for(let n=1;n<=e;n++){const o=n/e;t.push(o)}return t.push(0),t}function _e({i:e,l:t,u:n,p:o,_:r}){const{height:c,width:s}=n,i=c/e.span_rows,l=s/e.span_columns,u=c-i+i/2,a=n.top+u,f=innerHeight;if(!(a>=0&&a<=f||n.bottom>=0&&n.bottom<=f))return;const d=new Set(t.parentElement.children),p=n.left-l/2,g=n.right+l/2,_=Math.max(a,0),h=e=>d.has(e),m=document.elementsFromPoint(p,_).find(h),y=document.elementsFromPoint(g,_).find(h),[,w]=o.get(t),[,b]=r.get(t);b(y),w(m)}function he(e,t){if(!t)return!1;const n=new URL(t,document.baseURI),o=me(e);return n.pathname.includes(o)}function me(e){return new URL(e,document.baseURI).pathname.split("/").pop().split(".").slice(0,-1).join(".")}function ye({h:e,m:t,v:n}){if(e?.matches(".depict-content-block"))return()=>t().get(e)?.();const o=e?.querySelectorAll("img"),r=(t,n)=>{if(!t||!o)return;for(const e of o)if(he(t,e.src)||he(t,e.srcset)||he(t,e.dataset.src))return e;const r=me(t),c=e?.querySelector(`[style*=${JSON.stringify(r)}],${n}`);return c},c="[data-depict-default-image]",s=e?.matches(c)?e:e?.querySelector(c),i=r(s?.dataset?.depictDefaultImage,"[data-depict-default-image-element]"),l=r(s?.dataset?.depictHoverImage,"[data-depict-hover-image-element]");if(!e||!i&&!l)return()=>{};let u=!1;const[a,f]=_(0),[d,p]=_(0),[g,h]=_(0),[b,k]=_(0),[S,O]=_(0),T=new ResizeObserver((t=>w((()=>{for(const{target:n,contentRect:{height:o}}of t)n===e?f(o):n===i?p(o):n===l&&h(o),u||(u=!0,queueMicrotask((()=>{const t=(1===e.childElementCount?e.firstElementChild:e).getBoundingClientRect(),n=(g()&&l?l:i).getBoundingClientRect();if(n.width&&n.height&&t.width&&t.height){const e=n.top-t.top,o=t.bottom-n.bottom;k(e),O(o)}else k(0),O(0);u=!1})))}))));v((()=>T.disconnect())),i&&T.observe(i),l&&T.observe(l),T.observe(e);const M=y((()=>{const e=a(),t=d()||g();if(e&&t)return e-t}));return m((()=>{const e=M();if(null==e)return;const t={k:b(),S:S()};n((o=>{let r=o.get(e);return r||(r=new Set,o.set(e,r)),r.add(t),v((()=>n((e=>(r.delete(t),e))))),o}))})),M}const we=new URLSearchParams(location.search).has("depict_debug");var be=te("<div>");const ve=new WeakMap;let ke=!0;function Se(e,t,n,o=!1){if(!e)return;if(!document.documentElement.contains(e)&&!o)return void queueMicrotask((()=>Se(e,t,n,!0)));const r=n+"",c=ve.get(e)?.[t];c!==r&&(ve.set(e,{...ve.get(e),[t]:r}),!we&&ke?e?.animate([{[t]:r},{[t]:r}],{fill:"forwards",duration:1}):e?.style.setProperty(t,r))}function Oe(e){for(const t of e)return t}function Te(e){const t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage("")}ke=(()=>{const e="flex",t=((r=be()).style.setProperty("display","var(--my-variable)"),r),n=((o=be()).style.setProperty("contain","strict"),ce(o,t),o);var o,r;document.body.append(n),Se(t,"--my-variable",e);const c=getComputedStyle(t).display;return n.remove(),c===e})();const Me=function(){class e extends HTMLElement{static#e=new Set;static#t=new Map;static#n=new Map;static#o=new Set;static onEveryElement(t){const n=o=>{let r=!1,c=()=>r=!0;e.#n.has(n)||e.#n.set(n,[]),e.#n.get(n).push((()=>c())),e.#t.get(o).push((()=>c())),g((e=>{t(o),r?e():c=e}))};e.#e.add(n),e.#o.forEach(n),v((()=>{e.#e.delete(n),e.#n.get(n).forEach((e=>e())),e.#n.delete(n)}))}connectedCallback(){e.#t.set(this,[()=>{e.#o.delete(this),e.#t.delete(this)}]),e.#o.add(this);for(const t of e.#e)e.#o.has(this)&&t(this)}disconnectedCallback(){e.#t.get(this).forEach((e=>e()))}}return customElements.define("depict-grid-beacon",e),e}(),Ie=k();function Ae(e){const[t,n]=_(new Set,{equals:!1});Me.onEveryElement((e=>{n((t=>t.add(e))),v((()=>n((t=>(t.delete(e),t)))))}));const o=y((()=>{for(const e of t()){const t=e.parentElement;if(t?.matches(".depict-grid"))return t}}));return K(Ie.Provider,{value:o,get children(){return e.children}})}function Pe(){return S(Ie)}const xe=e=>e instanceof HTMLElement&&!e.matches(".depict-content-block"),Ee="[data-depict-product-id]",[Re,Ce]=_(location.href),Le=()=>Ce(location.href);((e,t=!0)=>{if("undefined"==typeof History)return;const{prototype:n}=History,o=history,r=t=>{const r=n=>{const o=n[t];n[t]=new Proxy(o,{apply:(n,o,r)=>{const c=Reflect.apply(n,o,r);try{e(r,t)}catch(s){console.error(s)}return c}})};r(n),Object.getOwnPropertyNames(o).includes(t)&&r(o)};r("pushState"),t&&r("replaceState")})(Le),addEventListener("popstate",Le);const je=Re,Be=k(),De=()=>S(Be);function Ne(e){const t=y((()=>{const e=new URL(je());return Object.fromEntries(e.searchParams)})),n=y((()=>t().sort_by)),o=y((()=>{for(const e in t())if(e.startsWith("filter"))return!!t()[e];return!1}));return K(Be.Provider,{value:{O:o,T:n},get children(){return e.children}})}const $e="depict_cached_fetch",qe=JSON.parse(localStorage[$e]||"{}");async function Fe({M:e,I:t,A:n=!1,P:o}){const r=JSON.stringify({input:e,init:t,...o&&{extraKey:o}}),c=qe[r],s=+new Date;if(c&&!n){const e=s-c.time;return{response:new Response(c.value,{status:200}),cacheAgeMs:e}}const i=await fetch(e,t),l=await i.clone().text();return qe[r]={time:s,value:l},localStorage[$e]=JSON.stringify(qe),{response:i,cacheAgeMs:0}}async function Ke({R:e,C:t,L:n,A:o=!1,P:r}){const c=[];let s,i;for(;;){const{response:l,cacheAgeMs:u}=await Fe({M:"/api/2024-01/graphql.json",I:Je(e,t,s),A:o,P:r}),{data:a}=await l.json(),{nodes:f,pageInfo:d}="collection"in a?a.collection.products:a.products;if((null==i||u>i)&&(i=u),s=d.endCursor,c.push(...f.map((e=>e.id))),n(c),!d.hasNextPage)return i}}function Je(e,t,n){const o=JSON.stringify(n)||null,r="pageInfo { endCursor hasNextPage hasPreviousPage startCursor }";return{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":e},body:JSON.stringify({query:void 0===t?`query Products {\n    products(first: 250, after: ${o}, sortKey: TITLE) {\n        nodes {\n            id\n        }\n        ${r}\n    }\n}`:`query CollectionProducts {\n    collection(id: "gid://shopify/Collection/${t}") {\n        products(first: 250, after: ${o}) {\n            nodes {\n                id\n            }\n            ${r}\n        }\n    }\n}`})}}const ze=document.currentScript;var He=te("<video crossorigin=anonymous>"),Ue=te("<source>");function Ge(e){const t=y((()=>e.j.sort(((e,t)=>"m3u8"===e.B&&"m3u8"!==t.B?-1:"m3u8"===t.B&&"m3u8"!==e.B?1:t.D-e.D)))),n=(()=>{const e=document,[t,n]=_("hidden"!==e.visibilityState),o=()=>n("hidden"!==e.visibilityState);return e.addEventListener("visibilitychange",o),v((()=>e.removeEventListener("visibilitychange",o))),t})();return re((t=>{const o=y((t=>{const o=n()&&e.N;return!(t||!e.q)||o}));m((()=>{o()?t.play().catch((e=>((...e)=>we&&console.warn(...e))("Error playing video",e))):t.pause()}))}),o=He()),o.playsInline=!0,o.muted=!0,o.loop=!0,o.controls=!1,ne(o,"disablepictureinpicture",!0),ce(o,K(H,{get each(){return t()},children:e=>{return t=Ue(),h((n=>{var o=e().F,r=e().K;return o!==n.e&&ne(t,"type",n.e=o),r!==n.t&&ne(t,"src",n.t=r),n}),{e:void 0,t:void 0}),t;var t}})),h((()=>ne(o,"poster",e.J))),o;var o}var Ve=te('<img alt="Content block image"loading=lazy>',!0,!1);function We(e){const[t,n]=_(),o=y((()=>{const n=e.H,o=t(),r=e.U;return n&&o&&r?Math.round(Math.max(n,o*r)):n})),r=y((()=>Xe(e.G,400))),c=y((()=>{return t=e.G,[128,256,512,1024,2048,3072,4096].map((e=>`${Xe(t,e)} ${e}w`)).join(", ");var t}));let s=!0;return h((()=>{e.G,s=!0})),K(U,{get when(){return o()},get children(){var t=Ve();return re((t=>{t.addEventListener("load",(()=>{const e=t.naturalWidth/t.naturalHeight;s&&(n(e),s=!1)})),m((()=>t.loading=e.V?"eager":"lazy"))}),t),h((n=>{var s="depict-block-image"+(e.W?" "+e.W:""),i=o()+"px",l=c(),u=r();return s!==n.e&&oe(t,n.e=s),i!==n.t&&ne(t,"sizes",n.t=i),l!==n.a&&ne(t,"srcset",n.a=l),u!==n.o&&ne(t,"src",n.o=u),n}),{e:void 0,t:void 0,a:void 0,o:void 0}),t}})}function Xe(e,t){return e+"&width="+encodeURIComponent(t)}const Qe=k();function Ye(e){const t=new Map,n=new IntersectionObserver((e=>w((()=>{for(const n of e)t.get(n.target)?.(n)}))));return v((()=>n.disconnect())),K(Qe.Provider,{value:{X:n,Y:t},get children(){return e.children}})}var Ze=te("<div class=depict-block-media>");function et(e){const t=y((()=>e.i.index<2*e.Z));return K(pe,{get component(){return e.i.ee?"a":"div"},class:"depict-content-block",ref:t=>m((()=>{for(const n in e.te)Se(t,n,e.te[n]);Se(t,"--content-aspect-ratio",e.ne.get(e.i.block_id)||"auto")})),get href(){return e.i.ee},get children(){return K(tt,{get q(){return t()},get ne(){return e.ne},get i(){return e.i}})}})}function tt(e){const[t,n]=_(),o=y((()=>t()&&(e=>{const t=S(Qe),[n,o]=_(!1);return t.Y.set(e,(e=>o(e.isIntersecting))),t.X.observe(e),v((()=>{t.X.unobserve(e),t.Y.delete(e)})),n})(t())));return re(n,r=Ze()),ce(r,K(U,{get when(){return e.i.j},get children(){return K(Ge,{get J(){return e.i.oe},get j(){return e.i.j},get q(){return e.q},get N(){return o()?.()}})}}),null),ce(r,K(U,{get when(){return e.i.re},get children(){return K(nt,{get ce(){return e.i.re},get se(){return e.i.ie},get le(){return t()},get q(){return e.q},get N(){return o()?.()}})}}),null),r;var r}function nt(e){const t=y((()=>e.le&&(e=>{const[t,n]=_(0),[o,r]=_(0),c=new ResizeObserver((t=>w((()=>{for(let o=0;o<t.length;o++){const{width:c,height:s}=t[o].contentRect,i=s||e.getBoundingClientRect().height;i&&r(Math.ceil(i)),c&&n(Math.ceil(c))}}))));return c.observe(e),v((()=>c.disconnect())),[t,o]})(e.le)));return[K(We,{get H(){return t()?.[0]?.()||0},get U(){return t()?.[1]?.()||0},get G(){return e.ce},get V(){return e.q}}),K(U,{get when(){return e.se},get children(){return K(We,{get H(){return t()?.[0]?.()||0},get U(){return t()?.[1]?.()||0},get G(){return e.se},get V(){return e.q||e.N},W:"hover-image"})}})]}const ot="depictGridRenderingRan";function rt(){(()=>{if(window[ot])throw console.error(ze,ze.parentElement),ze.remove(),Error("Depict grid rendering ran twice");window[ot]=!0})();const{ue:e,ae:t,fe:n,de:o,R:r,Z:c,pe:s,ge:i,C:l,_e:u}=(()=>{const[e,t]=_(!1),[n,o]=_("null"),[r,c]=_("null"),[s,i]=_("null"),[l,u]=_("null"),[a,f]=_(""),[d,p]=_(2),[g,h]=_(),[m,b]=_(2),[k,S]=_(""),[O,T]=_(""),[M,I]=_(""),[A,P]=_(),x=()=>w((()=>{const{dataset:e}=ze,n=e.collectionId;h(n?+n:void 0),t("true"===e.alignImages),o(e.contentBlocks),u(e.duplicates),f(e.blockIds),p(+e.columnsMobile),b(+e.columnsDesktop),c(e.paginate),P(e.storefrontAccessKey),i(e.firstPageProductIds),T(e.blockAssets),S(e.blockLinks),I(e.defaultSorting)}));x();const E=new MutationObserver(x),R=y((()=>JSON.parse(l()))),C=y((()=>JSON.parse(r()))),L=(()=>{const e=window.matchMedia("(max-width: 990px)"),[t,n]=_(e.matches),o=e=>n(e.matches);return e.addEventListener("change",o),v((()=>e.removeEventListener("change",o))),t})(),j=y((()=>L()?d():m())),B=y((()=>JSON.parse(s()))),D=y((()=>{const e=JSON.parse(n()),t=a().trim().split(","),o=k().split("·ç®"),r=(e=>e.split("·ç®").map((e=>{const[t,n]=e.split("‚µ∞");if(!n){const[e,n]=t.split("Íåù");return{re:e,ie:n}}const o=n.split("ëà∫"),r=[];for(const c of o){const e=c.split("„Ä∑"),[t,n,o,s]=e;r.push({B:t,F:n,K:o,D:+s})}return{j:r,oe:t}})))(O());return e?.map(((e,n)=>({...e,block_id:t[n],...r[n],ee:o[n],span_columns:Math.min(j(),e.span_columns)})))}));return E.observe(ze,{attributes:!0}),{ue:D,ae:R,de:C,fe:B,C:g,R:A,Z:j,ge:e,pe:n,_e:M}})(),{ne:a,he:f}=(({me:e,ye:t,Z:n,de:o,C:r,fe:c,R:s,_e:i})=>{const l=Pe(),u=((e,t,n)=>{const[o,r]=_(void 0,{equals:!1}),{T:c}=De();return m((async()=>{const n=e();n&&await Ke({R:n,C:t(),L:r,P:c()})>6e5&&Ke({R:n,C:t(),L:r,A:!0,P:c()})})),y((()=>{const e=o(),t=n();return!e?.length&&t?.length?t:e}),void 0,{equals:!1})})(s,r,c),{we:a,be:f}=(e=>{const t=Pe(),n=y((()=>{const e=t(),[n,o]=_(new Set);if(!e)return n;o(new Set([...e.children].filter(xe)));const r=new MutationObserver((e=>o((t=>{const n=new Set(t);for(const o of e){for(const e of o.addedNodes)xe(e)&&n.add(e);for(const e of o.removedNodes)xe(e)&&n.delete(e)}return n}))));return r.observe(e,{childList:!0}),v((()=>r.disconnect())),n})),[o,r]=_(!1);let c=!1;const s=y((()=>{const e={};o();for(const t of n()()){const n=t.matches(Ee)?t:t.querySelector(Ee),o=n?.dataset.depictProductId;if(o){const n="gid://shopify/Product/"+o;(e[n]||=[]).push(t)}else c||(Te((()=>r((e=>!e)))),c=!0)}return e}));return{we:y((()=>{const t=e();if(!t)return[];const n=s();return t.map((e=>n[e])).filter((e=>e))})),be:s}})(u),[d,p]=_(new Set),{ve:g,ke:h}=((e,t,n,o,r,c)=>{const s=y((()=>{const s=t(),i=o(),l=n();if(!i||!l)return;const{page_size:u}=e(),a=new Set(s?.map((e=>e.product))),f=new Map,d=new Set(i),p=r(),g=c(),_=new Map;for(const e of l){const{index:t}=e,n=f.get(t);n?(n.push(e),f.set(t,n)):f.set(t,[e])}const h={},m=new Map;let y=0,w=0,b=0,v=0,k=0;for(let e=0;d.size;){const t=f.get(e),n=m.get(e);if(n)m.delete(e),e+=n;else if(t){f.delete(e);for(const n of t){for(let t=1;t<n.span_rows;t++)m.set(e+g*t,n.span_columns);e+=n.span_columns,(h[w]||=[]).push({...n,relativeIndex:n.index-v})}}else if(y)y--,e++,k++;else{const t=Oe(d);a.has(t)&&y++,e++,k++,b++,d.delete(t)}const o=Math.floor(b/u);w===o||p.has(o)||(_.set(w,k),k=0,v=e,w=o)}_.set(w,k);for(const[e,t]of f){f.delete(e);for(const e of t)(h[w]||=[]).push({...e,relativeIndex:Math.max(e.index-v,0)})}return{blocksPerPage:h,takenNonBlockSlotsPerPage:_}}));return{ve:y((()=>s()?.blocksPerPage?.[e().current_page])),ke:y((()=>s()?.takenNonBlockSlotsPerPage?.get(e().current_page)))}})(o,t,e,u,d,n),w=y((()=>Object.fromEntries(g()?.map((e=>[e.block_id,e]))||[]))),b=(k=g,S=h,O=n,y((()=>{let e=S();const t=new Map;if(void 0===e)return t;const n=new Map(k()?.map((e=>[e.relativeIndex,e]))||[]),o=new Map,r=O();let c=0;for(let s=0;s<e;s++){const i=n.get(s),l=o.get(s);if(l)o.delete(s),c+=l;else if(i){const{span_columns:n,span_rows:l,...u}=i;for(let e=1;e<l;e++)o.set(s+r*e,n);e+=n*l,t.set(s-c,i.block_id),c+=n-1}}return t})));var k,S,O;const T=(e=>{const t=Pe(),[n,o]=_(void 0),r=new ResizeObserver((e=>o(e.at(-1).contentRect.height))),c=y((()=>e()[0]?.[0]));m((()=>{const e=c();e&&(r.observe(e),v((()=>r.unobserve(e))))}));const s=y((()=>{let e=n();return e?e-=10:e=300,e+"px"}));return m((()=>Se(t(),"--sample-product-height",s()))),s})(a),{he:M,Se:I}=(({Z:e,Oe:t,Te:n,we:o,Me:r,_e:c})=>{const{T:s,O:i}=De(),l=y((()=>{const e=c(),t=s();return e&&t&&e!==t||i()})),u=y((()=>{const c=new Map,s=new Map;if(l())return{he:c,Se:s};const i=new Set(o().flat()),u=t(),a=new Set(Object.keys(n())),f=r(),d=new Map,p=(t,o)=>{const r=n()[t],{span_columns:s,span_rows:i}=r,l={"--order":o,"--grid-column-span":s,"--grid-row-span":s>=e()?1:i};d.set(o,(e=>l["--order"]=e)),c.set(t,l),a.delete(t)},g=Array.from({...Object.fromEntries(u),length:Math.max(...u.keys())+1});let _=0;for(;i.size;_++){const e=g[_];if(e){p(e,_);continue}const t=Oe(i);d.set(_,t),i.delete(t)}if(f)for(const e of a)p(e,_++);const h=d.size;for(const[e,t]of d){const n=e-h;"function"==typeof t?t(n):s.set(t,n)}return{he:c,Se:s}}));return{he:()=>u().he,Se:()=>u().Se}})({Z:n,Oe:b,Te:w,we:a,Me:y((()=>o().current_page>=o().pages-1)),_e:i}),{ne:A}=(({Z:e,Te:t,he:n,Ie:o})=>{const r=Pe(),[c,s]=_(new Map),i=y((()=>{const e=new Set,o=n();for(const n in t())o.has(n)||e.add(n);return e}));return m((()=>{const n=new Map,c=e(),l=[],u=t();for(const e in u){const t=u[e],{span_columns:o}=t;o<c||i().has(e)||(n.set(e,+t.aspect_ratio),l[Math.floor(t.relativeIndex/c)]=!0)}s(n);const a=[];for(let e=0;e<l.length;e++)l[e]?a.push("auto"):a.push(`minmax(${o()}, auto)`);Se(r(),"--grid-template-rows",a.length?a.join(" "):"none")})),{ne:c}})({Z:n,Te:w,Ie:T,he:M});return(e=>{const t=F((()=>[...e().keys()]),(t=>{m((()=>Se(t,"--order",e().get(t)))),v((()=>Se(t,"--order",0)))}));m(t)})(I),((e,t,n,o)=>{const r=y((()=>new Set(Object.keys(e())))),c=y((()=>{const e=r(),n=t();if(n)for(let t=0;t<n.length;t++)if(e.has(n[t]))return t})),s=y((()=>r().size));m((()=>{const e=c();if(null==e||void 0===t())return;const{page_size:r,pages:i}=o(),l=Math.floor(e/r),u=new Set;for(let t=e;t<e+s();t+=r){const e=Math.floor(t/r);e!==l&&u.add(e)}const a={pages:i,page_size:r,current_page:l};ze.dataset.paginate=JSON.stringify(a,null,2),n(u)}))})(f,u,p,o),m((()=>Se(l(),"--grid-columns",n()+""))),{ne:A,he:M}})({me:e,ye:t,Z:c,de:o,C:l,R:r,fe:n,_e:u}),{Ae:d}=(({Pe:e,Z:t,ne:n,he:o})=>{const r=Pe(),[c,s]=_(new Map,{equals:!1}),i=y((()=>Object.fromEntries(e()?.map((e=>[e.block_id,e]))?.filter((([e])=>o().has(e)))||[])));return m((()=>{const e=r();if(!e)return;const c=F((()=>Object.keys(i())),(r=>{const c=y((()=>i()[r])),l=O((()=>K(et,{get i(){return c()},get Z(){return t()},get ne(){return n()},get te(){return o().get(r)}})));m((()=>{const t=l();e.prepend(t),s((e=>e.set(t,c))),v((()=>{t.remove(),s((e=>(e.delete(t),e)))}))}))}));m(c)})),{Ae:c}})({Pe:e,Z:c,ne:a,he:f});return m((()=>{i()&&((e=>{const t=new Map,n=new Map,o=new IntersectionObserver((o=>w((()=>o.forEach((({target:o,boundingClientRect:r})=>_e({l:o,i:e().get(o)(),u:r,p:t,_:n})))))),{threshold:ge(100)}),[r,c]=_(!1),s=()=>c((e=>!e)),i=_(new Map,{equals:!1}),l=_(new Map,{equals:!1}),[u,a]=_(innerWidth),f=new ResizeObserver((()=>a(innerWidth)));m((()=>{u();for(const o of t.keys()){const r=e().get(o)?.();r&&_e({l:o,i:r,u:o.getBoundingClientRect(),_:n,p:t})}}));const d=F((()=>[...e().keys()]),(e=>(({xe:e,Ee:[t,n],Re:o,p:r,_:c,Ce:s,Le:[i,l]})=>{const u=_(void 0),a=_(void 0),[f]=u,[d]=a;r.set(o,u),c.set(o,a);const p=y((()=>(e(),ye({h:f(),v:l,m:t})))),g=y((()=>(e(),ye({h:d(),v:l,m:t})))),h=y((()=>{const e=p()(),t=g()();return Math.min(e??1/0,t??1/0)})),w=y((()=>{const e=i().get(h());return e?Oe(e)?.k??0:0})),b=y((()=>{const e=i().get(h());if(!e)return 0;const t=Oe(e);let n;return n=t?t.S:h(),n===1/0?0:n})),k="--bottom-alignment-spacing",S="--top-alignment-spacing";m((()=>Se(o,k,b()+"px"))),m((()=>Se(o,S,w()+"px"))),v((()=>Se(o,k,"0px"))),v((()=>Se(o,S,"0px"))),n((e=>e.set(o,h))),v((()=>n((e=>(e.delete(o),e))))),s.observe(o),v((()=>{s.unobserve(o),r.delete(o),c.delete(o)}))})({xe:r,Ee:i,Re:e,p:t,_:n,Ce:o,Le:l})));m(d),f.observe(document.documentElement),f.observe(document.body),addEventListener("DOMContentLoaded",s),addEventListener("load",s),v((()=>{f.disconnect(),removeEventListener("DOMContentLoaded",s),removeEventListener("load",s)}))})(d),s())})),[]}g((()=>K(Ae,{get children(){return K(Ye,{get children(){return K(Ne,{get children(){return K(rt,{})}})}})}})))}();

</script>
